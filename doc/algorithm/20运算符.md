---
title: 20.运算符
---

## 位运算符(vue 源码中可用于鉴权)

### 按位与: & (两个同时是 1 的时候，结果是 1，否则是 0)

& 以特定的方式组合操作二进制数中对应的位,如果对应的位都是 1,那么结果就是 1,如果任意一个位是 0,则结果就是 0  
例:

```
1 二进制: 00000000 00000000 00000000 00000001
3 二进制: 00000000 00000000 00000000 00000011
运算结果: 00000000 00000000 00000000 00000001 (1&3=1)
```

### 按位或: | (两个同时是 0 的时候，结果是 0，否则是 1)

| 运算符跟 & 的区别在于如果对应的位中任一个操作数为 1，那么结果就是 1  
例:

```
1 二进制: 00000000 00000000 00000000 00000001
3 二进制: 00000000 00000000 00000000 00000011
运算结果: 00000000 00000000 00000000 00000011 (1|3=3)
```

### 按位异或: ^ (两个不同结果为 1，相同结果为 0)

^ 如果对应两个操作位 有且仅有 1 个 1 时结果为 1，其它都是 0  
例:

```
1 二进制: 00000000 00000000 00000000 00000001
3 二进制: 00000000 00000000 00000000 00000011
运算结果: 00000000 00000000 00000000 00000010 (1^3=2)
```

### 按位非: ~

~ 运算符是对位求反，1 变 0,0 变 1，也就是求二进制的反码

### 左移: << (乘以 1)

<< 运算符使指定的二进制数所有位都左移指定次数，其移动规则为：丢弃高位，低位补 0（即按照二进制形式把所有的数字向左移动对应的位数，高位移除（舍弃），低位的空位补 0）  
例:

```
1 二进制: 00000000 00000000 00000000 00000001
1<<3: 000|00000 00000000 00000000 00000011000 (8)
```

结论: 任何数的<<几位数,相当于 任何数乘 2 的几位数次幂

### 有符号右移：>> (整除以 2)

`>>` 该操作符会将指定操作数的二进制位向右移动指定的位数。向右被移出的位被丢弃，拷贝最左侧的位以填充左侧（这里是和无符号右移的最大区别）。由于新的最左侧的位总是和以前相同，而符号位并没有被改变。所以被称作“符号传播”

结论: 任何数的>>几位数,相当于 任何数整除以 2 的几位数次幂

### 无符号右移：>>>

`>>>`该操作符会将第一个操作数向右移动指定的位数。向右被移出的位被丢弃，左侧用 0 填充（这点是和有符号右移最大的区别）。因为符号位变成了 0，所以结果总是非负的。

注：对于非负数，有符号右移和无符号右移总是返回相同的结果。

### 整数和小数的十进制转换为二进制

例: 17 转为二进制(10001)---计算到商为 0 为止

- 17 除以 2，商为 8，余数为 1
- 8 除以 2，商为 4，余数为 0
- 4 除以 2，商为 2， 余数为 0
- 2 除以 2，商为 1， 余数为 0
- 1 除以 2，商为 0，余数为 1
  例：0.625 转换为二进制(0.101)---计算到小数部分为 0 为止
- 0.625 \* 2，积为 1.25，取整数 1
- 1.25 \* 2，积为 0.5，取整数 0
- 0.5 \* 2，积为 1，取整数 1

## leetCode 191 位 1 的个数

循环检查二进制位

```js
var hammingWeight = function (n) {
  let ret = 0;
  for (let i = 0; i < 32; i++) {
    if ((n & (1 << i)) !== 0) {
      ret++;
    }
  }
  return ret;
};
// 时间复杂度O(k)
```

位运算优化

```js
var hammingWeight = function (n) {
  let ret = 0;
  while (n) {
    n &= n - 1;
    ret++;
  }
  return ret;
};
// 时间复杂度O(log N)
```
