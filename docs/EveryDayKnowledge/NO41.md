# 每天一个小知识点
## 第四十一天 
---

## vue虚拟dom的解析过程
- 首先对将要插入到文档中的DOM树结构进行分析,使用js对象将其表示出来,比如一个元素对象,包含TagName、props和children这些属性。然后将这个js对象给保存下来,最后再将DOM片段插入到文档中。
- 当页面的状态发生变化,需要对页面的DOM的结构进行调整的时候,首先根据变更的状态,重新构建起一棵对象树,然后将这棵树和旧的对象树进行比较,记录下两棵树的差异
- 最后将记录的有差异的地方应用到真正的DOM树中去,这样视图就更新了
## 为什么要用虚拟dom
- 保证性能下限,在不进行手动优化的情况下,提供过得去的性能
  页面渲染的流程: 解析HTML->生成DOM->生成CSSOM->Layout->Paint->compiler  
  修改虚拟DOM和真实DOM的过程:  
  真实DOM：生成HTML字符串 + 重建所有的DOM元素  
  虚拟DOM：生成VNode + DOMDiff + 必要的dom更新  
虚拟dom的更新准备工作耗费更多的时间,即在js层面,相比于更多的DOM操作它的消费是极其便宜的
- 虚拟dom本质上是js对象,它可以很方便的跨平台操作,比如服务端渲染、uniapp等
## 虚拟dom真的比真实dom性能好吗
- 首次渲染大量DOM时,由于多了一层虚拟DOM计算,会比innerHTML插入慢
- 正如它能保证性能下限,在真实DOM操作的时候进行针对性的优化时,还是更快的