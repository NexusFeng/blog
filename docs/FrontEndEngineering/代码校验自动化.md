# 1.å‰è¨€
åœ¨å°ç»„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªäººå†™ä»£ç çš„é£æ ¼ä¸å°½ç›¸åŒï¼Œå¯¼è‡´ä¸Šä¼ åˆ°ä»“åº“çš„ä»£ç é£æ ¼ç™¾èŠ±é½æ”¾ï¼Œä¸åˆ©äºç»´æŠ¤å’Œé˜…è¯»ï¼Œå—åˆ°å·ä½¬æ–‡ç« çš„å¯å‘ï¼Œå°è¯•æä¸€å¥—è‡ªå·±çš„å·¥ä½œæµã€‚æ­¤å¤–ï¼Œåœ¨commitæ—¶å€™çš„æè¿°ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ï¼Œæ‰€ä»¥å¤šäººå¼€å‘æƒ…å†µä¸‹ï¼Œç»Ÿä¸€ä»£ç è§„èŒƒå¾ˆæœ‰å¿…è¦ã€‚

# 2.å·¥å…·ä»‹ç»
## ESlint
ä¸€æ¬¾é…ç½®åŒ–ä»£ç æ£€æŸ¥å·¥å…·ï¼Œçº¦æŸä½ çš„å¼€å‘è§„èŒƒï¼Œè¯¦è§[ESlintå®˜ç½‘](https://eslint.bootcss.com/)
## Prettier
ä¸€æ¬¾ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œæ­é…Eslintï¼Œè¯¦è§[Prettierå®˜ç½‘](https://prettier.io/)
## Husky
ä¸€æ¬¾Githookå·¥å…·ï¼Œè®©é…ç½® git é’©å­å˜å¾—æ›´ç®€å•ï¼Œæ”¯æŒæ‰€æœ‰çš„gité’©å­ã€‚è¯¦è§[husky](https://typicode.github.io/husky/#/)
## commitlint
git commit è§„èŒƒæäº¤å·¥å…·,è¯¦è§[commitlintå®˜ç½‘](https://commitlint.js.org/#/)
## lint-staged
åœ¨ä»£ç commitä¹‹å‰ï¼Œè¿›è¡Œä»£ç è§„åˆ™æ£€æŸ¥,é¿å…ä¸è§„åˆ™ä»£ç è¿›å…¥ä»“åº“ï¼Œlint-stagedèƒ½å¤Ÿè®©lintåªæ£€æµ‹æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œé€Ÿåº¦å¾ˆå¿«ã€‚è¯¦è§[lint-staged](https://github.com/okonet/lint-staged#readme)
# 3.åŸºç¡€é…ç½®
å¼ºçƒˆå»ºè®®è¿™äº›æ­å»ºå·¥ä½œåœ¨é¡¹ç›®å»ºç«‹åˆæœŸå°±å¼€å§‹ï¼Œåœ¨åæœŸå†åŠ å…¥è¿™äº›è§„èŒƒæ˜¯ä¸€ä»¶å¾ˆç—›è‹¦çš„äº‹[ğŸ˜­]ã€‚
## é…ç½®Eslint
æ–°é¡¹ç›®åˆ©ç”¨vue UI åˆ›å»ºé¡¹ç›®æ—¶é€‰æ‹©ESlint+Prettier,å³å¯
![](https://files.mdnice.com/user/18792/b2e351b6-9da9-4922-9b1c-c72aba779e76.png)
å¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰ç”¨åˆ°ESlintæˆ–Prettierï¼Œå¾—å®‰è£…ä¸¤è€…å…¼å®¹çš„åŒ…ï¼Œæ­¤å¤„ä¸å¤šèµ˜è¿°ã€‚
åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å»ºç«‹.eslintrc.jsæ–‡ä»¶ï¼Œå®Œæ•´é…ç½®å¦‚ä¸‹ï¼Œå¯æ ¹æ®éœ€è¦å–èˆ


```
// eslintå®šä¹‰å€¼å«ä¹‰
// 0 ç¦ç”¨æ­¤è§„åˆ™
// 1 ä¸ç¬¦åˆè§„åˆ™å³ç»™å‡ºè­¦å‘Š
// 2 ä¸ç¬¦åˆè§„åˆ™å³æŠ¥é”™
module.exports = {
    root: true,
    env: {
      node: true,
    },
    extends: ["plugin:vue/essential", "eslint:recommended", "@vue/prettier"],
    parserOptions: {
      parser: "babel-eslint",
    },
    rules: {
      "no-console": process.env.NODE_ENV === "production" ? "warn" : "off",
      "no-debugger": process.env.NODE_ENV === "production" ? "warn" : "off",
      // "vue/max-attributes-per-line": [
      //   2,
      //   {
      //     "singleline": 10,
      //     "multiline": {
      //       "max": 1,
      //       "allowFirstLine": false,
      //     },
      //   },
      // ],
      // "vue/singleline-html-element-content-newline": "off",
      // "vue/multiline-html-element-content-newline": "off",
      "vue/name-property-casing": ["error", "PascalCase"],
      "vue/no-v-html": "off",
      // ä¸¤ä¸ªç©ºæ ¼ç¼©è¿›
      "indent": [
        2,
        2,
        {
          "SwitchCase": 1,
        },
      ],
      // å•å¼•å·
      "quotes": [
        2,
        "single",
        {
          "avoidEscape": true,
          "allowTemplateLiterals": true,
        },
      ],
      // æœªä½¿ç”¨çš„å˜é‡
      "no-unused-vars": [
        2,
        {
          "vars": "all",
          "args": "after-used",
        },
      ],
      // å…³é”®å­—å‰åç©ºæ ¼
      "keyword-spacing": [
        2,
        {
          "before": true,
          "after": true,
        },
      ],
      // functionå…³é”®å­—å’Œå‡½æ•°ååé¢çš„ç©ºæ ¼
      // "space-before-function-paren": [2, "never"],
      // é™¤äº†null,å…¶ä»–ç”¨===è€Œä¸æ˜¯==
      "eqeqeq": ["error", "always", {
        "null": "ignore"
      }],
      // å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œç¬¦ç›´æ¥ç”¨ç©ºæ ¼
      "space-infix-ops": 2,
      // é€—å·å‰é¢ä¸ç”¨ç©ºæ ¼ï¼Œé€—å·åé¢ç”¨ç©ºæ ¼
      "comma-spacing": [
        2,
        {
          "before": false,
          "after": true,
        },
      ],
      // elseå¿…é¡»å’ŒåèŠ±æ‹¬å·ä¸€è¡Œ
      "brace-style": [
        2,
        "1tbs",
        {
          "allowSingleLine": true,
        },
      ],
      // å¤šè¡Œ if è¯­å¥çš„çš„æ‹¬å·ä¸èƒ½çœ
      "curly": [2, "multi-line"],
      // ä½¿ç”¨æµè§ˆå™¨å…¨å±€å˜é‡æ—¶åŠ ä¸Š window. å‰ç¼€
      "no-undef": 2,
      // ä¸å…è®¸æœ‰è¿ç»­å¤šè¡Œç©ºè¡Œ
      "no-multiple-empty-lines": [
        2,
        {
          "max": 1,
        },
      ],
      // æ¢è¡Œç¬¦åœ¨è¿ç®—ç¬¦çš„ä½ç½®
      "operator-linebreak": [
        2,
        "after",
        {
          "overrides": {
            "?": "before",
            ":": "before",
          },
        },
      ],
      // æ¡ä»¶è¯­å¥ä¸­èµ‹å€¼è¯­å¥
      "no-cond-assign": 2,
      // å•è¡Œä»£ç å—ä¸¤è¾¹åŠ ç©ºæ ¼
      "block-spacing": [2, "always"],
      // å¯¹å±æ€§åå¼ºåˆ¶ä½¿ç”¨é©¼å³°
      "camelcase": [
        0,
        {
          "properties": "always",
        },
      ],
      // ä¸å…è®¸æœ‰å¤šä½™çš„è¡Œæœ«é€—å·
      "comma-dangle": [2, "never"],
      // å§‹ç»ˆå°†é€—å·ç½®äºè¡Œæœ«
      "comma-style": [2, "last"],
      // ç‚¹å·æ“ä½œç¬¦é¡»ä¸å±æ€§éœ€åœ¨åŒä¸€è¡Œ
      "dot-location": [2, "property"],
      // å‡½æ•°è°ƒç”¨æ—¶æ ‡è¯†ç¬¦ä¸æ‹¬å·é—´ä¸ç•™é—´éš”
      "func-call-spacing": ["error", "never"],
      // é”®å€¼å¯¹å½“ä¸­å†’å·ä¸å€¼ä¹‹é—´è¦ç•™ç©ºç™½
      "key-spacing": [
        2,
        {
          "beforeColon": false,
          "afterColon": true,
        },
      ],
      // æ„é€ å‡½æ•°è¦ä»¥å¤§å†™å­—æ¯å¼€å¤´, ä½†è°ƒç”¨å¤§å†™å­—æ¯å¼€å¤´çš„å‡½æ•°ä¸ä¸€å®šéœ€è¦new
      "new-cap": [
        2,
        {
          "newIsCap": true,
          "capIsNew": false,
        },
      ],
      // æ— å‚çš„æ„é€ å‡½æ•°è°ƒç”¨æ—¶è¦å¸¦ä¸Šæ‹¬å·
      "new-parens": 2,
      // å¯¹è±¡ä¸­å®šä¹‰äº†å­˜å€¼å™¨ï¼Œä¸€å®šè¦å¯¹åº”çš„å®šä¹‰å–å€¼å™¨
      "accessor-pairs": 2,
      // å­ç±»çš„æ„é€ å™¨ä¸­ä¸€å®šè¦è°ƒç”¨ super
      "constructor-super": 2,
      // ä½¿ç”¨æ•°ç»„å­—é¢é‡è€Œä¸æ˜¯æ„é€ å™¨
      "no-array-constructor": "error",
      // é¿å…ä½¿ç”¨ arguments.callee å’Œ arguments.caller
      "no-caller": 2,
      // é¿å…å¯¹ç±»åé‡æ–°èµ‹å€¼
      "no-class-assign": 2,
      // é¿å…ä¿®æ”¹ä½¿ç”¨ const å£°æ˜çš„å˜é‡
      "no-const-assign": 2,
      // æ­£åˆ™ä¸­ä¸è¦ä½¿ç”¨æ§åˆ¶ç¬¦
      "no-control-regex": "error",
      // ä¸è¦å¯¹å˜é‡ä½¿ç”¨ delete æ“ä½œã€‚
      "no-delete-var": 2,
      // ä¸è¦å®šä¹‰å†—ä½™çš„å‡½æ•°å‚æ•°
      "no-dupe-args": 2,
      // ç±»ä¸­ä¸è¦å®šä¹‰å†—ä½™çš„å±æ€§
      "no-dupe-class-members": 2,
      // å¯¹è±¡å­—é¢é‡ä¸­ä¸è¦å®šä¹‰é‡å¤çš„å±æ€§
      "no-dupe-keys": 2,
      // switch è¯­å¥ä¸­ä¸è¦å®šä¹‰é‡å¤çš„ case åˆ†æ”¯
      "no-duplicate-case": 2,
      // åŒä¸€æ¨¡å—æœ‰å¤šä¸ªå¯¼å…¥æ—¶ä¸€æ¬¡æ€§å†™å®Œ
      "no-duplicate-imports": "error",
      // æ­£åˆ™ä¸­ä¸è¦ä½¿ç”¨ç©ºå­—ç¬¦
      "no-empty-character-class": 2,
      // ä¸è¦è§£æ„ç©ºå€¼
      "no-empty-pattern": 2,
      // ä¸è¦ä½¿ç”¨ eval()
      // "no-eval": 0,
      // é¿å…ä¸å¿…è¦çš„å¸ƒå°”è½¬æ¢
      "no-extra-boolean-cast": 2,
      // ä¸è¦ä½¿ç”¨å¤šä½™çš„æ‹¬å·åŒ…è£¹å‡½æ•°
      "no-extra-parens": [2, "functions"],
      // switch ä¸€å®šè¦ä½¿ç”¨ break æ¥å°†æ¡ä»¶åˆ†æ”¯æ­£å¸¸ä¸­æ–­ã€‚
      "no-fallthrough": 2,
      //é¿å…å¯¹å£°æ˜è¿‡çš„å‡½æ•°é‡æ–°èµ‹å€¼ã€‚
      "no-func-assign": 2,
      // æ³¨æ„éšå¼çš„ eval()
      // "no-implied-eval": 2,
      // åµŒå¥—çš„ä»£ç å—ä¸­ç¦æ­¢å†å®šä¹‰å‡½æ•°
      "no-inner-declarations": [2, "functions"],
      // ä¸è¦å‘ RegExp æ„é€ å™¨ä¼ å…¥éæ³•çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚
      "no-invalid-regexp": 2,
      // ä¸è¦ä½¿ç”¨éæ³•çš„ç©ºç™½ç¬¦ã€‚
      "no-irregular-whitespace": 2,
      // ç¦æ­¢ä½¿ç”¨ __iterator__
      "no-iterator": 2,
      // å¤–éƒ¨å˜é‡ä¸è¦ä¸å¯¹è±¡å±æ€§é‡å
      "no-label-var": 2,
      // ä¸è¦ä½¿ç”¨æ ‡ç­¾è¯­å¥ã€‚
      "no-labels": [
        2,
        {
          "allowLoop": false,
          "allowSwitch": false,
        },
      ],
      // ä¸è¦ä¹¦å†™ä¸å¿…è¦çš„åµŒå¥—ä»£ç å—
      "no-lone-blocks": 2,
      // é™¤äº†ç¼©è¿›ï¼Œä¸è¦ä½¿ç”¨å¤šä¸ªç©ºæ ¼ã€‚
      "no-multi-spaces": 2,
      // ä¸è¦ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²ã€‚
      "no-multi-str": 2,
      "no-new-object": 2,
      "no-new-require": 2,
      "no-new-symbol": 2,
      "no-new-wrappers": 2,
      "no-path-concat": 2,
      // ä½¿ç”¨ getPrototypeOf æ¥æ›¿ä»£ __proto__
      "no-proto": 2,
      // ä¸è¦é‡å¤å£°æ˜å˜é‡ã€‚
      "no-redeclare": 2,
      // æ­£åˆ™ä¸­é¿å…ä½¿ç”¨å¤šä¸ªç©ºæ ¼ã€‚
      "no-regex-spaces": 2,
      // return è¯­å¥ä¸­çš„èµ‹å€¼å¿…éœ€æœ‰æ‹¬å·åŒ…è£¹ã€‚
      "no-return-assign": [2, "except-parens"],
      // ä¸è¦éšæ„æ›´æ”¹å…³é”®å­—çš„å€¼ã€‚
      "no-shadow-restricted-names": 2,
      // ç¦æ­¢ä½¿ç”¨ç¨€ç–æ•°ç»„
      "no-sparse-arrays": 2,
      // æ­£ç¡®ä½¿ç”¨ ES6 ä¸­çš„å­—ç¬¦ä¸²æ¨¡æ¿ã€‚
      "no-template-curly-in-string": "error",
      // ä½¿ç”¨ this å‰è¯·ç¡®ä¿ super() å·²è°ƒç”¨ã€‚
      "no-this-before-super": 2,
      // ç”¨ throw æŠ›é”™æ—¶ï¼ŒæŠ›å‡º Error å¯¹è±¡è€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚
      "no-throw-literal": 2,
      // è¡Œæœ«ä¸ç•™ç©ºæ ¼ã€‚
      "no-trailing-spaces": 2,
      // ä¸è¦ä½¿ç”¨ undefined æ¥åˆå§‹åŒ–å˜é‡ã€‚
      "no-undef-init": 2,
      // å¾ªç¯è¯­å¥ä¸­æ³¨æ„æ›´æ–°å¾ªç¯å˜é‡ã€‚
      "no-unmodified-loop-condition": 2,
      // å¦‚æœæœ‰æ›´å¥½çš„å®ç°ï¼Œå°½é‡ä¸è¦ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ã€‚
      "no-unneeded-ternary": [
        2,
        {
          "defaultAssignment": false,
        },
      ],
      // returnï¼Œthrowï¼Œcontinue å’Œ break åä¸è¦å†è·Ÿä»£ç ã€‚
      "no-unreachable": 2,
      // finally ä»£ç å—ä¸­ä¸è¦å†æ”¹å˜ç¨‹åºæ‰§è¡Œæµç¨‹ã€‚
      "no-unsafe-finally": 2,
      // å…³ç³»è¿ç®—ç¬¦çš„å·¦å€¼ä¸è¦åšå–åæ“ä½œã€‚
      "no-unsafe-negation": "error",
      // é¿å…ä¸å¿…è¦çš„ .call() å’Œ .apply()
      "no-useless-call": 2,
      // é¿å…ä½¿ç”¨ä¸å¿…è¦çš„è®¡ç®—å€¼ä½œå¯¹è±¡å±æ€§
      "no-useless-computed-key": 2,
      // import, export å’Œè§£æ„æ“ä½œä¸­ï¼Œç¦æ­¢èµ‹å€¼åˆ°åŒåå˜é‡ã€‚
      "no-useless-rename": 2,
      // å±æ€§å‰é¢ä¸è¦åŠ ç©ºæ ¼ã€‚
      "no-whitespace-before-property": 2,
      // ç¦æ­¢ä½¿ç”¨ with
      "no-with": 2,
      // ä»£ç å—ä¸­é¿å…å¤šä½™ç•™ç™½ã€‚
      "padded-blocks": [2, "never"],
      // å±•å¼€è¿ç®—ç¬¦ä¸å®ƒçš„è¡¨è¾¾å¼é—´ä¸è¦ç•™ç©ºç™½ã€‚
      "rest-spread-spacing": ["error", "never"],
      // é‡åˆ°åˆ†å·æ—¶ç©ºæ ¼è¦åç•™å‰ä¸ç•™ã€‚
      "semi-spacing": [
        2,
        {
          "before": false,
          "after": true,
        },
      ],
      // ä»£ç å—é¦–å°¾ç•™ç©ºæ ¼ã€‚
      "space-before-blocks": [2, "always"],
      // åœ†æ‹¬å·é—´ä¸ç•™ç©ºæ ¼ã€‚
      "space-in-parens": [2, "never"],
      // ä¸€å…ƒè¿ç®—ç¬¦åé¢è·Ÿä¸€ä¸ªç©ºæ ¼ã€‚
      "space-unary-ops": [
        2,
        {
          "words": true,
          "nonwords": false,
        },
      ],
      // æ³¨é‡Šé¦–å°¾ç•™ç©ºæ ¼
      "spaced-comment": [
        2,
        "always",
        {
          "markers": [
            "global",
            "globals",
            "eslint",
            "eslint-disable",
            "*package",
            "!",
            ",",
          ],
        },
      ],
      // æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å˜é‡å‰åä¸åŠ ç©ºæ ¼ã€‚
      "template-curly-spacing": [2, "never"],
      // æ£€æŸ¥ NaN çš„æ­£ç¡®å§¿åŠ¿æ˜¯ä½¿ç”¨ isNaN()ã€‚
      "use-isnan": 2,
      // ç”¨åˆæ³•çš„å­—ç¬¦ä¸²è·Ÿ typeof è¿›è¡Œæ¯”è¾ƒæ“ä½œã€‚
      "valid-typeof": 2,
      // è‡ªè°ƒç”¨åŒ¿åå‡½æ•° (IIFEs) ä½¿ç”¨æ‹¬å·åŒ…è£¹ã€‚
      "wrap-iife": [2, "any"],
      // yield * ä¸­çš„ * å‰åéƒ½è¦æœ‰ç©ºæ ¼ã€‚
      "yield-star-spacing": [2, "both"],
      // è¯·ä¹¦å†™ä¼˜é›…çš„æ¡ä»¶è¯­å¥
      "yoda": [2, "never"],
      // åˆ†å·
      "semi": [2, "never"],
  
      "no-unexpected-multiline": 2,
      "arrow-spacing": [
        2,
        {
          before: true,
          after: true,
        },
      ],
      "eol-last": 2,
      "generator-star-spacing": [
        2,
        {
          before: true,
          after: true,
        },
      ],
      "handle-callback-err": [2, "^(err|error)$"],
      "jsx-quotes": [2, "prefer-single"],
      "no-array-constructor": 2,
      "no-console": "off",
      "no-native-reassign": 2,
      "no-negated-in-lhs": 2,
      "no-shadow-restricted-names": 2,
      "no-spaced-func": 2,
      "no-useless-constructor": 2,
      "one-var": [
        2,
        {
          initialized: "never",
        },
      ],
      "prefer-const": 2,
      "object-curly-spacing": [
        2,
        "always",
        {
          objectsInObjects: false,
        },
      ],
      "array-bracket-spacing": [2, "never"],
    },
    //å½“ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„SDKæ—¶ï¼Œeslintä¼šæŠ¥æ‰¾ä¸åˆ°ï¼Œå¯ä»¥åŠ å…¥åˆ°globalsï¼Œå–æ¶ˆå¯¹è¿™ä¸ªçš„æ£€æŸ¥
    globals: {
      fengmap: true,
    },
  };
```
åŒæ—¶ï¼Œå¯å»ºç«‹.eslintignoreæ–‡ä»¶ï¼Œæ ¡éªŒæ—¶æ’é™¤å“ªäº›æ–‡ä»¶

```
build/*.js
src/assets
public
dist
```
## é…ç½®Prettier
åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å»ºç«‹.prettierrc.jsæ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š

```
module.exports = {
    // æœ€å¤§é•¿åº¦80ä¸ªå­—ç¬¦
    "printWidth": 80,
    // è¡Œæœ«åˆ†å·
    "semi": false,
    // å•å¼•å·
    "singleQuote": true,
    // JSXåŒå¼•å·
    "jsxSingleQuote": false,
    // å°½å¯èƒ½ä½¿ç”¨å°¾éšé€—å·ï¼ˆåŒ…æ‹¬å‡½æ•°å‚æ•°ï¼‰
    "trailingComma": "none",
    // åœ¨å¯¹è±¡æ–‡å­—ä¸­æ‰“å°æ‹¬å·ä¹‹é—´çš„ç©ºæ ¼ã€‚
    "bracketSpacing": true,
    // > æ ‡ç­¾æ”¾åœ¨æœ€åä¸€è¡Œçš„æœ«å°¾ï¼Œè€Œä¸æ˜¯å•ç‹¬æ”¾åœ¨ä¸‹ä¸€è¡Œ
    "jsxBracketSameLine": true,
    // ç®­å¤´åœ†æ‹¬å·
    "arrowParens": "avoid",
    // åœ¨æ–‡ä»¶é¡¶éƒ¨æ’å…¥ä¸€ä¸ªç‰¹æ®Šçš„ @format æ ‡è®°ï¼ŒæŒ‡å®šæ–‡ä»¶æ ¼å¼éœ€è¦è¢«æ ¼å¼åŒ–ã€‚
    "insertPragma": false,
    // ç¼©è¿›
    "tabWidth": 2,
    // ä½¿ç”¨tabè¿˜æ˜¯ç©ºæ ¼
    "useTabs": false,
    // è¡Œå°¾æ¢è¡Œæ ¼å¼
    // "endOfLine": "auto",
    "HTMLWhitespaceSensitivity": "ignore"
  }
```
å¦‚æœä½¿ç”¨çš„VSCode,å®ç°ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œæ“ä½œå¦‚ä¸‹ï¼š  
å®‰è£…eslintï¼Œprettierï¼Œveturæ’ä»¶
![](https://files.mdnice.com/user/18792/572eface-2fbd-4082-b0d4-cd7945827e42.jpg)
åœ¨vscodeï¼Œsetting.jsonä¸­æ·»åŠ ï¼Œå³å¯å®ç°ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–ï¼š

```
"eslint.autoFixOnSave": true,
    "editor.codeActionsOnSave": {
        "source.fixAll.eslint": true
    },
    "eslint.format.enable": true, // æ˜¯å¦å¼€å¯vscodeçš„eslint
    "eslint.options": { // æŒ‡å®švscodeçš„eslintæ‰€å¤„ç†çš„æ–‡ä»¶åç¼€
        "extensions": [
            ".js",
            ".vue",
            ".ts",
            ".tsx"
        ]
    },
    "eslint.validate": [
        "vue",
        "html",
        "javascript",
        "javascriptreact",
        "typescript",
        "typescriptreact"
    ],
    "vetur.format.defaultFormatter.html": "prettier",
    "prettier.endOfLine": "auto",
```



## é…ç½®Husky
é¦–å…ˆæ‰§è¡Œå®‰è£…å‘½ä»¤ `npm install husky --save-dev ` 

è¦åœ¨å®‰è£…åè‡ªåŠ¨å¯ç”¨é’©å­ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œ`npm set-script prepare "husky install"`

æ‰§è¡Œä¹‹åå³å¯åœ¨package.jsonä¸­çœ‹åˆ°ï¼š

```
"scripts": {
    "prepare": "husky install"
  },
```
å¦‚æœ`npm set-script`å‘½ä»¤ä¸èƒ½æ‰§è¡Œï¼Œå¯åœ¨package.jsonä¸­æ‰‹åŠ¨æ·»åŠ ï¼Œä¹Ÿå¯å‡çº§[npmç‰ˆæœ¬è‡³7.x](https://docs.npmjs.com/cli/v7/commands/npm-set-script)ï¼Œæ‰§è¡Œ`husky-init`å‘½ä»¤ï¼Œå¿«é€Ÿåˆå§‹åŒ–ä¸€ä¸ªhuskyï¼Œä¼šçœ‹åˆ°ç›®å½•ä¸‹ç”Ÿæˆäº†ä¸€ä¸ª.huskyæ–‡ä»¶å¤¹
## é…ç½®lint-staged
æ‰§è¡Œ `npm install lint-staged -D` å‘½ä»¤,
åœ¨package.jsonæ·»åŠ å¦‚ä¸‹ä»£ç (æŒ‡å®šæ£€æŸ¥æ–‡ä»¶ï¼Œè¯¦ç»†é…ç½®å¯è§å®˜ç½‘)ï¼š

```
"script": {...},
"lint-staged": {
    "src/**/*.{js,jsx,ts,tsx,json,vue}": [
      "prettier --write",
      "eslint",
      "git add"
    ]
  },
```
## é…ç½®commitè§„èŒƒ
é…ç½®commitè§„èŒƒæœ‰ä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯åˆ©ç”¨commitlintï¼Œç¬¬äºŒç§åˆ©ç”¨è‡ªå®šä¹‰è§„åˆ™(å°¤å¤§ç”¨çš„æ˜¯è‡ªå®šä¹‰è§„åˆ™)
### åˆ©ç”¨commitlint
æ‰§è¡Œå®‰è£…å‘½ä»¤`npm install -g @commitlint/cli @commitlint/config-conventional`

åœ¨æ ¹ç›®å½•æ–°å»ºcommitlint.config.jsæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç (è¿™é‡Œ@commitlint/config-conventional æä¾›äº†å®˜æ–¹çš„è§„åˆ™æ‰©å±•ï¼Œæ›´å¤šé…ç½®è§å®˜ç½‘)ï¼š

```
module.exports = {
  extends: ['@commitlint/config-conventional'],
  // è‡ªå®šä¹‰è§„åˆ™, name: [0, 'always', 3], æ•°ç»„ç¬¬ä¸€ä½0ä¸ºdisableï¼Œ1ä¸ºwarningï¼Œ2ä¸ºerror
  // ç¬¬äºŒä½ åº”ç”¨ä¸ºå¦ å€¼ä¸º, always|never
  rules: {
    'type-enum': [
      2,
      'always',
      [
        'udp', // æ›´æ–°æŸé¡¹åŠŸèƒ½
        'feat', // æ–°åŠŸèƒ½
        'fix', // ä¿®è¡¥bug
        'style' // æ ¼å¼
      ]
    ]
  }
}

```
### åˆ©ç”¨è‡ªå®šä¹‰è§„åˆ™
å®‰è£…chalk(ç”¨äºç»ˆç«¯æ˜¾ç¤ºå¤šè‰²å½©è¾“å‡º)ï¼Œæ‰§è¡Œ`npm install chalk `
åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºverifyCommit.jsæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```
const chalk = require('chalk')
chalk.level = 1
const msgPath = process.env.HUSKY_GIT_PARAMS || '.git/COMMIT_EDITMSG'
const msg = require('fs').readFileSync(msgPath, 'utf-8').trim()
const commitRE = /^\[\d+\]:\s.{1,50}/

if (!commitRE.test(msg)) {
  console.log()
  console.error(
    chalk.red(`  æè¿°ä¸è§„èŒƒï¼Œç¤ºä¾‹\n`) +
      chalk.red(`  [ä¿®å¤]: xxx\n`) +
      chalk.red(`  æˆ–è€…\n`) +
      chalk.red(`  [æ–°å¢]: xxx\n`)
  )
  process.exit(1)
}

```
è‡³æ­¤ï¼ŒåŸºæœ¬é…ç½®é¡¹å·²ç»å®Œæ¯•ï¼Œæ¥ä¸‹æ¥æ˜¯å®ç°
# 4.å®ç°

å®ç°æ•ˆæœç¤ºä¾‹ï¼š

1.åœ¨æäº¤ä¹‹å‰æ£€æŸ¥ä»£ç å¹¶æ ¼å¼åŒ–ï¼Œåˆ©ç”¨commitlintæ£€æŸ¥commitä¿¡æ¯ï¼Œæäº¤ä¹‹åæ‰§è¡Œ`git pull,git push`å‘½ä»¤

2.åœ¨æäº¤ä¹‹å‰æ£€æŸ¥ä»£ç å¹¶æ ¼å¼åŒ–ï¼Œåˆ©ç”¨è‡ªå®šä¹‰commitè§„åˆ™æ£€æŸ¥commitä¿¡æ¯ï¼Œæäº¤ä¹‹åæ‰§è¡Œ`git pull,git push`å‘½ä»¤
## å®ç°ä¸€
æ·»åŠ é’©å­ï¼Œæ‰§è¡Œ`npx husky add .husky/pre-commit 'npx lint-staged`(æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨é¡¹ç›®ä½¿ç”¨çš„æ˜¯npmï¼Œæ­¤å¤„ä½¿ç”¨çš„æ˜¯npxï¼Œè€Œénpmï¼‰
æ‰§è¡Œå‘½ä»¤åä¼šåœ¨.huskyæ–‡ä»¶ä¸‹ç”Ÿæˆä¸€ä¸ªpre-commitæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

npx lint-staged

```
æ‰§è¡Œ`npx husky add .husky/commit-msg "npx commitlint -e $1"`,æ‰§è¡Œå‘½ä»¤åä¼šåœ¨.huskyæ–‡ä»¶ä¸‹ç”Ÿæˆä¸€ä¸ªcommit-msg,å†…å®¹å¦‚ä¸‹ï¼š

```
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"
npx commitlint -e $1
```
æ‰§è¡Œ`npx husky add .husky/post-commit "git pull, git push"`,æ‰§è¡Œå‘½ä»¤åä¼šåœ¨.huskyæ–‡ä»¶ä¸‹ç”Ÿæˆä¸€ä¸ªpost-commit,å†…å®¹å¦‚ä¸‹ï¼š

```
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

git pull
git push

```
ç”Ÿæˆçš„é’©å­æ–‡ä»¶é‡Œçš„å‘½ä»¤å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦éšæ„ä¿®æ”¹ã€‚

**æµ‹è¯•ï¼š**
åœ¨App.jsé‡Œéšæ„å¢åŠ ä¸œè¥¿ï¼ŒåŒæ—¶å°†åˆ¶é€ ä¸€äº›è¿åeslintè§„åˆ™çš„å†™æ³•ï¼Œå¦‚å•å¼•å·æ”¹ä¸ºåŒå¼•å·

![](https://files.mdnice.com/user/18792/9e6552d3-3aaf-4a84-a0b2-ed5a211bf5bb.png)

æ‰§è¡Œ`git add .`,ä¹‹åcommitæ—¶ï¼Œå¡«å†™æè¿°éšæ„å†™ï¼Œæ‰§è¡Œ`git commit -m '45566'`
å¦‚å›¾ï¼Œç”±äºæè¿°ä¸è§„èŒƒï¼Œä¼šè¢«ç»ˆæ­¢æäº¤

![](https://files.mdnice.com/user/18792/d7afff88-4c72-407d-9fc7-38f1f0f500ca.png)

æ”¹ä¸ºæ­£ç¡®çš„æè¿°ï¼Œæ‰§è¡Œ`git commit -m "feat: 'æ–°åŠŸèƒ½'"`,å¦‚å›¾ï¼šæäº¤æˆåŠŸï¼ŒåŒæ—¶ï¼Œä¹‹å‰å†™çš„ä»£ç ä¹Ÿä¼šæ ¹æ®eslintè§„åˆ™æ ¼å¼åŒ–

![](https://files.mdnice.com/user/18792/74cb8143-a3b4-46c0-a936-be2dc7aca598.png)

## å®ç°äºŒ
æ·»åŠ é’©å­éƒ¨åˆ†åŒå®ç°ä¸€ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œç”Ÿæˆcommit-msgæ–‡ä»¶æ—¶ï¼Œä½¿ç”¨è‡ªå®šä¹‰è§„åˆ™ï¼Œæ‰§è¡Œ`npx husky add .husky/commit-msg "npx node verifyCommit.js`ï¼Œåœ¨.huskyæ–‡ä»¶ä¸‹ç”Ÿæˆcommit-msgï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

npx node verifyCommit.js
```
**æµ‹è¯•ï¼š**
æµ‹è¯•æ–¹æ³•å®ç°ä¸€ï¼Œåœ¨commitæ—¶å€™ï¼Œæ‰§è¡Œ`git commit -m '45566'`ï¼Œå¦‚å›¾ï¼Œæäº¤ä¿¡æ¯ä¸è§„èŒƒï¼Œç»ˆç«¯ç»ˆæ­¢

![](https://files.mdnice.com/user/18792/069c2229-d357-417c-aeb4-26c0a1c21273.png)

æ”¹ä¸ºæ­£ç¡®çš„æè¿°ï¼Œæ‰§è¡Œ`git commit -m "[æ–°å¢]ï¼šå¥½å®¶ä¼™"`,æäº¤æˆåŠŸ

# èµ„æºå¯¼èˆª
æ–‡ä¸­ä»“åº“åœ°å€ï¼šhttps://gitee.com/NexusFeng/eslint_test
