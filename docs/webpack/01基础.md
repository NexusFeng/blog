---
title: 1.基础
---
## 定义
webpack是一个静态的模块化打包工具,为现代的JavaScript应用程序
## 理解
打包：打包工具  
静态：将代码打包成最终的静态资源  
模块化：默认支持各种模块化开发,ES Module、CommonJS、AMD等  
现代的：现代前端开发面临的各种各样的问题催生了webpack的出现和发展
## 执行webpack进行打包时
执行`webpack`命令打包时,会去当前目录下找`src/index.js`文件作为打包的入口文件,检查`index.js`文件的引用情况,进行打包。默认情况下找的是`index`文件
## 构建流程
- 1.从配置文件和shell命令中读取出参数
- 2.根据配置初始化Compiler,并添加所有的plugin,然后执行run方法
- 3.根据配置的entry找到入口文件
- 4.从入口文件出发,找到所有与模块匹配的loader,对模块进行编译,然后通过babel/traverse找到所有包含require的模块,递归处理所有模块
- 5.根据入口和模块的关系,组装成一个个包含多个模块的chunk
- 6.然后把每个chunk转换为单独的文件添加到assets中
- 7.最后把assets的内容写入到一个个文件中
## webpack的核心概念
- entry: 入口
- output: 输出
- loader: 模块转换器,用于把模块原有的内容按照需求转换成新内容
- plugins: 扩展插件,在webpack构建流程中的特定时机注入扩展逻辑来改变构建结果或者做想做的事情

## 常用的配置
- `entry`: 【构建入口】,vue脚手架的构建入口是`main.js`
- `mode`: 【模式】,开发环境或者生产环境,生产环境会开启优化,比如压缩和混淆
- `devtool`: 可以将编译后的代码映射回原始源代码,不同的值会明显影响到构建和重新构建的速度,生产环境可以用`none`或者`source-map`,或者`hidden-source-map`,两者都会生成`.map`文件,区别是`source-map`会在打包出的js文件中增加一个引用注释,以便开发工具知道在哪找到报错,`hidden-source-map`则不会。开发环境一般基于构建速度选择`cheap-module-eval-source-map`
- `resolve`: 【解析】
  - alias: 创建`import`或者`require`的别名
  - modules: 解析模块时应该搜索的目录
  - mainFields: 从npm导入包的时候,决定从`package.json`中哪个字段导入模块,默认值为`['module', 'main']`
  - extensions: `['.js', '.json']`,尝试按照这些顺序解析后缀名,能够使用户在引入模块时不带扩展名
- `optimization`: 【优化】
  - minimize: 默认`true`,默认执行压缩
  - minimizer: 可以使用第三方压缩插件
- `devServer`: 
  - port: 指定要使用的host,如果想被外部访问到,配置`0.0.0.0`
  - port: 端口
  - open: 启动后立即在浏览器中打开
  - headers: 为所有响应添加headers
  - proxy: 设置代理,解决跨域
  - hot:`true`,开启热更新 
- `externals`: 将一些js库使用CDN方式引入,并且webpack不会对其进行打包`externals:'jquery'`
- `plugins`: 扩展插件,在webpack构建流程中的特定时机注入扩展逻辑来改变构建结果或者做想做的事情
- `output`: 
  - filename: 输出名称, `hash`(跟整个项目的构建有关,**粒度整个项目**),`chunkhash`(根据不同的入口进行依赖文件解析,构建对应的chunk,生成对应的hash值**粒度entry的每个文件入口**),`contenthash`(与生成的文件有关,每个文件都有唯一的hash值,**粒度每个文件的内容**)
  - path: 路径
